{"version":3,"sources":["../../src/models/SchemaUser.js"],"names":["userSchema","Schema","create_at","type","Date","default","userName","String","lowercase","required","email","unique","password","phone","Number","notifications","Boolean","enum","stateApp","tokenMobile","walletBtc","wallet","walletEth","walletLtc","walletBch","pre","next","isModified","bcrypt","genSalt","err","salt","hash","hashError"],"mappings":"AAAA;;;;;;AAEA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,aAAa,IAAIC,gBAAJ,CAAW;AAC1BC,aAAY;AACVC,UAAOC,IADG;AAEVC,aAAU;AAFA,GADc;AAK3BC,YAAS;AACRH,UAAKI,MADG;AAERC,eAAW,IAFH;AAGNC,cAAS,CAAC,IAAD,EAAO,wBAAP;AAHH,GALkB;AAU3BC,SAAO;AACNP,UAAKI,MADC;AAENI,YAAO,IAFD;AAGNH,eAAW,IAHL;AAINC,cAAS,CAAC,IAAD,EAAO,wBAAP;AAJH,GAVoB;AAgB3BG,YAAS;AACRT,UAAKI,MADG;AAERE,cAAS,CAAC,IAAD,EAAO,wBAAP;AAFD,GAhBkB;AAoB1BI,SAAQ;AACNV,UAAMW;AADA,GApBkB;AAuB1BC,iBAAgB;AACdZ,UAAOa,OADO;AAEdX,aAAU,IAFI;AAGdY,UAAO,CAAC,IAAD,EAAM,KAAN;AAHO,GAvBU;AA4B1BC,YAAS;AACPf,UAAKI,MADE;AAEPF,aAAU,QAFH;AAGPY,UAAM,CAAC,QAAD,EAAU,YAAV,EAAuB,UAAvB;AAHC,GA5BiB;AAiC1BE,eAAY;AACVhB,UAAKI;AADK,GAjCc;AAoC1Ba,aAAYC,sBApCc;AAqC1BC,aAAYD,sBArCc;AAsC1BE,aAAYF,sBAtCc;AAuC1BG,aAAYH;AAvCc,CAAX,CAAjB;;AA2CArB,WAAWyB,GAAX,CAAe,MAAf,EAAsB,UAASC,IAAT,EAAc;AAAA;;AAEhC,MAAI,CAAC,KAAKC,UAAL,CAAgB,UAAhB,CAAL,EAAkC,OAAOD,MAAP;;AAElCE,yBAAOC,OAAP,CAAe,EAAf,EAAmB,UAACC,GAAD,EAAMC,IAAN,EAAe;;AAE/B,QAAID,GAAJ,EAAS,OAAOJ,KAAKI,GAAL,CAAP;;AAETF,2BAAOI,IAAP,CAAY,MAAKpB,QAAjB,EAA0BmB,IAA1B,EAA+B,IAA/B,EAAoC,UAACE,SAAD,EAAWD,IAAX,EAAkB;;AAErD,UAAIC,SAAJ,EAAe,OAAOP,KAAKO,SAAL,CAAP;;AAEf,YAAKrB,QAAL,GAAgBoB,IAAhB;;AAEAN;AAEA,KARD;AAUF,GAdD;AAeH,CAnBD;;kBAqBe,qBAAM,MAAN,EAAa1B,UAAb,C","file":"SchemaUser.js","sourcesContent":["'use strict';\n\nimport {Schema,model} from 'mongoose';\nimport bcrypt from 'bcrypt-nodejs';\nimport moment from 'moment';\nimport wallet from './SchemaWallet';\n\nlet userSchema = new Schema({\n  create_at : {\n    type : Date,\n    default : moment()\n  },\n\tuserName:{\n\t\ttype:String,\n\t\tlowercase: true,\n    required:[true, '{PATH} es obligatorio.']\n\t},\n\temail :{\n\t\ttype:String,\n\t\tunique:true,\n\t\tlowercase: true,\n\t\trequired:[true, '{PATH} es obligatorio.']\n\t},\n\tpassword:{\n\t\ttype:String,\n\t\trequired:[true, '{PATH} es obligatorio.']\n\t},\n  phone : {\n    type: Number\n  },\n  notifications : {\n    type : Boolean,\n    default : true,\n    enum : [true,false]\n  },\n  stateApp:{\n    type:String,\n    default : 'active',\n    enum: ['active','background','inactive']\n  },\n  tokenMobile:{\n    type:String\n  },\n  walletBtc : wallet,\n  walletEth : wallet,\n  walletLtc : wallet,\n  walletBch : wallet\n})\n\n\nuserSchema.pre('save',function(next){ \n\n    if (!this.isModified('password')) return next();\n\n    bcrypt.genSalt(10, (err, salt) => {\n\n       if (err) return next(err); \n\n       bcrypt.hash(this.password,salt,null,(hashError,hash)=>{\n\n        if (hashError) return next(hashError);\n        \n        this.password = hash;\n\n        next();\n        \n       });\n\n    });\n});\n\nexport default model('User',userSchema)\n"]}