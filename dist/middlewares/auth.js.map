{"version":3,"sources":["../../src/middlewares/auth.js"],"names":["auth","req","res","next","headers","authorization","status","send","error","token","split","then","user","response","id","catch","message"],"mappings":"AAAA;;;;;;AAEA;;AAEA,IAAMA,OAAO,SAAPA,IAAO,CAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAkB;;AAE3B,QAAG,CAACF,IAAIG,OAAJ,CAAYC,aAAhB,EAA+B,OAAOH,IAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,OAAQ,wBAAT,EAArB,CAAP;AAC/B,QAAMC,QAAQR,IAAIG,OAAJ,CAAYC,aAAZ,CAA0BK,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAAd,CAH2B,CAG2B;AACtD,4BAAYD,KAAZ,EACCE,IADD,CACM,oBAAW;AACbV,YAAIW,IAAJ,GAAWC,SAASC,EAApB,CADa,CACW;AACxBX,eAFa,CAEN;AACV,KAJD,EAKCY,KALD,CAKO,iBAAQ;AACXb,YAAII,MAAJ,CAAWE,MAAMF,MAAjB,EAAyBC,IAAzB,CAA8B,EAACC,OAAQA,MAAMQ,OAAf,EAA9B;AACH,KAPD;AASH,CAbD;;kBAeehB,I","file":"auth.js","sourcesContent":["'use strict';\n\nimport {decodeToken} from '../services/token';\n\nconst auth = (req,res,next) => {\n    \n    if(!req.headers.authorization) return res.status(403).send({error : \"No tienes autorizacion\"});\n    const token = req.headers.authorization.split(' ')[1];//realizamos el Bearer para obtener el token\n    decodeToken(token)\n    .then(response =>{\n        req.user = response.id; //guardamos el usuario \n        next();//pasamos al siguiente middlewares\n    })\n    .catch(error =>{\n        res.status(error.status).send({error : error.message})\n    })\n  \n}\n\nexport default auth;"]}